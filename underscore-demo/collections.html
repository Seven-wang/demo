<!DOCTYPE html>
<html>
<head>
  <title>Collections</title>
</head>
<body>
  <script type="text/javascript" src="underscore.js"></script>
  <script type="text/javascript">
    // ======================== each
    (function() {
      _.each([1, 2, 3], function(value) {
        // console.log(value);
      });

      _.each({one: 3, two: 2, three: 1}, function(value, key) {
        // console.log('key = ' + key + ', value = ' + value);
      });

      var eachObj = {
        name: 'value'
      };
      
      _.each([1, 2, 3], function(value) {
        // console.log(this.name + '->' + value);
      }, eachObj);
    })();
    
    // ======================== map
    (function() {
      var mapArr = _.map([1, 2, 3], function(num) {
        return num * 3;
      });
      // console.log(mapArr);  // [3, 6, 9]

      var mapObj = _.map({one: 1, two: 2, three: 3}, function(num, key) {
        return num * 3;
      });
      // console.log(mapObj); // [3, 6, 9]

      var mapArr2 = _.map([[1, 2], [3, 4]], _.first);
      // console.log(mapArr2); // [1, 3]
    })();
    
    // ======================== reduce & reduceRight
    (function() {
      var sum = _.reduce([1, 2, 3], function(memo, num) {
        return memo + num;
      }, 0);

      // console.log(sum);

      var list = [[0, 1], [2, 3], [4, 5]];
      var flat = _.reduceRight(list, function(a, b) {
        return a.concat(b);
      }, []);

      // console.log(flat);
    })(); 

    // ======================== find & filter
    (function() {
      var even = _.find([1, 2, 3, 4, 5, 6], function(num) {
        return num % 2 == 0;
      });
      // console.log(even);

      var events = _.filter([1, 2, 3, 4, 5, 6], function(num) {
        return num % 2 == 0;
      });
      // console.log(events);
    })();

    // ======================== where & findWhere
    (function() {
      var listOfPlays = [{
        title: "The Tempest", 
        author: "Shakespeare", 
        year: 1611
      }, {
        title: "The Tempest", 
        author: "cobish", 
        year: 1611
      }, {
        title: "Cymbeline", 
        author: "Shakespeare", 
        year: 1611
      }];

      var whereResult = _.where(listOfPlays, {author: "Shakespeare", year: 1611});

      // console.log(whereResult);

      var findWhereResult = _.findWhere(listOfPlays, {author: "Shakespeare"});

      // console.log(findWhereResult);
    })();

    // ======================== reject
    (function() {
      var odds = _.reject([1, 2, 3, 4, 5, 6], function(num) {
        return num % 2 == 0;
      });

      // console.log(odds);
    })();

    // ======================== every & some
    (function() {
      var result = _.every([true, 1, null, 'yes'], _.identity);
      // console.log(result);  // false

      var result2 = _.some([true, 1, null, 'yes'], _.identity);
      // console.log(result2);  // true
    })();

    // ======================== contains
    (function() {
      var result = _.contains([1, 2, 3], 3);
      // console.log(result);  // true
    })();

    // ======================== invoke
    (function() {
      var result = _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');
      // console.log(result);
    })();

    // ======================== pluck
    (function() {
      var stooges = [{
        name: 'cobish',
        age: 18
      }, {
        name: 'wabish',
        age: 17
      }, {
        name: 'newbish',
        age: 16
      }];

      var result = _.pluck(stooges, 'name');
      // console.log(result);
    })();

    // ======================== max & min
    (function() {
      var nums = [10, 5, 100, 2, 1000];
      
      var result = _.max(nums);
      // console.log(result); // 1000

      var result2 = _.min(nums);
      // console.log(result2); // 2

      var stooges = [{
        name: 'cobish',
        age: 18
      }, {
        name: 'wabish',
        age: 17
      }, {
        name: 'newbish',
        age: 16
      }];

      var result3 = _.max(stooges, function(stooge) {
        return stooge.age;
      });
      // console.log(result3);
    })();

    // ======================== sortBy & groupBy & indexBy & countBy
    (function() {
      var result = _.sortBy([1, 2, 3, 4, 5, 6], function(num) {
        return Math.sin(num);
      });
      // console.log(result);

      var stooges = [{
        name: 'cobish',
        age: 18
      }, {
        name: 'wabish',
        age: 17
      }, {
        name: 'newbish',
        age: 16
      }];

      var result2 = _.sortBy(stooges, 'name');
      // console.log(result2);

      var result3 = _.groupBy([1.3, 2.1, 2.4], function(num) {
        return Math.floor(num);
      });
      // console.log(result3);

      var result4 = _.groupBy(['one', 'two', 'three'], 'length');
      // console.log(result4);

      var result5 = _.indexBy(stooges, 'age');
      // console.log(result5);

      var result6 = _.countBy([1, 2, 3, 4, 5], function(num) {
        return num % 2 == 0 ? 'even': 'odd';
      });
      // console.log(result6);
    })();

    // ======================== shuffle & sample
    (function() {
      var result = _.shuffle([1, 2, 3, 4, 5, 6]);
      // console.log(result);

      var result2 = _.sample([1, 2, 3, 4, 5, 6], 3);
      // console.log(result2);
    })();

    // ======================== toArray
    (function() {
      var result = (function() {
        return _.toArray(arguments);
      })(1, 2, 3, 4);

      // console.log(result);
    })();

    // ======================== size
    (function() {
      var result = _.size([{one: 1, two: 2, three: 3}]);
      // console.log(result);
    })();

    // ======================== partition
    (function() {
      var result = _.partition([0, 1, 2, 3, 4, 5], function(num) {
        return num > 3;
      });
      // console.log(result);
    })();
    
  </script>
</body>
</html>